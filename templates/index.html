<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIS-GAPMS | Home</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #f3f6f9;
          color: #333;
          animation: fadeInBody 0.6s ease-in-out;
        }
      
        @keyframes fadeInBody {
          from { opacity: 0; transform: translateY(30px); }
          to { opacity: 1; transform: translateY(0); }
        }
      
        header {
          background-color: #004080;
          color: white;
          padding: 25px 20px;
          text-align: center;
          box-shadow: 0 4px 8px rgba(0,0,0,0.1);
          animation: slideInTop 0.7s ease;
        }
      
        @keyframes slideInTop {
          0% { transform: translateY(-50px); opacity: 0; }
          100% { transform: translateY(0); opacity: 1; }
        }
      
        header h1 {
          margin: 0;
          font-size: 34px;
          font-weight: bold;
        }
      
        header p {
          font-size: 16px;
          margin-top: 8px;
        }
      
        main {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          max-width: 1200px;
          margin: 50px auto;
          padding: 20px;
          gap: 40px;
          animation: fadeInContent 0.7s ease-in;
        }
      
        @keyframes fadeInContent {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
      
        .info {
          max-width: 600px;
          animation: slideInLeft 0.8s ease;
        }
      
        @keyframes slideInLeft {
          from { opacity: 0; transform: translateX(-40px); }
          to { opacity: 1; transform: translateX(0); }
        }
      
        .info h2 {
          color: #004080;
          font-size: 28px;
          margin-bottom: 15px;
        }
      
        .info p {
          font-size: 16px;
          line-height: 1.6;
          margin-bottom: 15px;
        }
      
        .form-container {
          background: white;
          padding: 25px 30px;
          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
          border-radius: 10px;
          width: 360px;
          animation: slideInRight 0.8s ease;
        }
      
        @keyframes slideInRight {
          from { opacity: 0; transform: translateX(40px); }
          to { opacity: 1; transform: translateX(0); }
        }
      
        h3 {
          color: #004080;
          margin-bottom: 20px;
          font-size: 22px;
        }
      
        .form-group {
          margin-bottom: 16px;
          position: relative;
        }
        
        .form-group i {
          position: absolute;
          left: 12px;
          top: 12px;
          color: #004080;
        }
        
        input {
          width: 100%;
          padding: 12px 12px 12px 40px;
          font-size: 16px;
          border: 1px solid #ccc;
          border-radius: 6px;
          transition: border-color 0.3s ease, box-shadow 0.3s ease;
          box-sizing: border-box;
        }
      
        input:focus {
          border-color: #004080;
          outline: none;
          box-shadow: 0 0 0 3px rgba(0, 64, 128, 0.1);
        }
        
        select {
          width: 100%;
          padding: 12px 12px 12px 40px;
          font-size: 16px;
          border: 1px solid #ccc;
          border-radius: 6px;
          transition: border-color 0.3s ease, box-shadow 0.3s ease;
          box-sizing: border-box;
          background-color: white;
          appearance: none;
          -webkit-appearance: none;
          -moz-appearance: none;
          background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23004080' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
          background-repeat: no-repeat;
          background-position: right 12px center;
          background-size: 16px;
        }
        
        select:focus {
          border-color: #004080;
          outline: none;
          box-shadow: 0 0 0 3px rgba(0, 64, 128, 0.1);
        }
      
        button {
          width: 100%;
          padding: 12px;
          background-color: #004080;
          color: white;
          border: none;
          border-radius: 6px;
          cursor: pointer;
          font-size: 16px;
          font-weight: 500;
          transition: background-color 0.3s ease, transform 0.2s ease;
        }
      
        button:hover {
          background-color: #003060;
          transform: translateY(-1px);
        }
        
        .toggle-form {
          text-align: center;
          margin-top: 15px;
          font-size: 14px;
          color: #666;
        }
      
        .toggle-form a {
          color: #004080;
          text-decoration: none;
          font-weight: 600;
          transition: color 0.2s ease;
        }
      
        .toggle-form a:hover {
          text-decoration: underline;
          color: #002f66;
        }
        
        .form-container.hidden {
          display: none;
        }
        
        .alert {
          padding: 10px 15px;
          border-radius: 4px;
          margin-bottom: 15px;
          font-size: 14px;
          display: none;
        }
        
        .alert-success {
          background-color: #d4edda;
          color: #155724;
          border: 1px solid #c3e6cb;
        }
        
        .alert-error {
          background-color: #f8d7da;
          color: #721c24;
          border: 1px solid #f5c6cb;
        }
      
        footer {
          text-align: center;
          padding: 20px;
          font-size: 14px;
          background-color: #ffffff;
          border-top: 1px solid #ddd;
          color: #666;
          margin-top: 50px;
        }
      
        @media screen and (max-width: 768px) {
          main {
            flex-direction: column;
            align-items: center;
            padding: 20px;
          }
      
          .form-container {
            width: 100%;
          }
      
          .info {
            max-width: 100%;
            text-align: center;
          }
        }
    </style>
</head>
<body>
    <header>
        <h1>MIS-GAPMS</h1>
        <p>Graduate Applications Processing and Management System</p>
    </header>
    
    <main>
        <div class="info">
            <h2>Welcome to MIS-GAPMS</h2>
            <p>
                MIS-GAPMS is designed to streamline and simplify the graduate application process for Bowie State University. Our system provides a seamless experience for both applicants and administrators.
            </p>
            <p>
                Sign in or register to start managing your applications today.
            </p>
        </div>

        <div class="form-container" id="signin-form">
            <h3>Sign In</h3>
            <div id="signin-alert" class="alert alert-error"></div>
            <form id="signin-form-element" action="/signin/basic" method="POST">
                <div class="form-group">
                    <i class="fas fa-user"></i>
                    <input type="text" name="username" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="password" placeholder="Password" required>
                </div>
                <button type="submit">Sign In</button>
            </form>
            <div class="toggle-form">
                Don't have an account? <a href="#" id="show-register">Register</a>
            </div>
        </div>
        
        <div class="form-container hidden" id="register-form">
            <h3>Create Account</h3>
            <div id="register-alert" class="alert alert-error"></div>
            <form id="register-form-element" action="/register/basic" method="POST">
                <div class="form-group">
                    <i class="fas fa-user"></i>
                    <input type="text" name="first_name" placeholder="First Name" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-user"></i>
                    <input type="text" name="last_name" placeholder="Last Name" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-user"></i>
                    <input type="text" name="username" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" name="email" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="password" placeholder="Password" required>
                </div>
                <div class="form-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="confirm_password" placeholder="Confirm Password" required>
                </div>
                <button type="submit">Register</button>
            </form>
            <div class="toggle-form">
                Already have an account? <a href="#" id="show-signin">Sign In</a>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 MIS-GAPMS | Bowie State University</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Toggle between signin and register forms
            const signinForm = document.getElementById('signin-form');
            const registerForm = document.getElementById('register-form');
            const showRegisterLink = document.getElementById('show-register');
            const showSigninLink = document.getElementById('show-signin');
            
            showRegisterLink.addEventListener('click', function(e) {
                e.preventDefault();
                signinForm.classList.add('hidden');
                registerForm.classList.remove('hidden');
            });
            
            showSigninLink.addEventListener('click', function(e) {
                e.preventDefault();
                registerForm.classList.add('hidden');
                signinForm.classList.remove('hidden');
            });
            
            // Handle signin form submission
            const signinFormElement = document.getElementById('signin-form-element');
            const signinAlert = document.getElementById('signin-alert');
            
            signinFormElement.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = this.querySelector('input[name="username"]').value;
                const password = this.querySelector('input[name="password"]').value;
                
                // Send signin request to correct endpoint
                fetch('/signin/basic', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Invalid credentials');
                    }
                    return response.json();
                })
                .then(data => {
                    // Redirect to signin page on success
                    window.location.href = '/signin';
                })
                .catch(error => {
                    signinAlert.textContent = error.message;
                    signinAlert.style.display = 'block';
                });
            });
            
            // Handle register form submission
            const registerFormElement = document.getElementById('register-form-element');
            const registerAlert = document.getElementById('register-alert');
            
            registerFormElement.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = this.querySelector('input[name="username"]').value;
                const email = this.querySelector('input[name="email"]').value;
                const password = this.querySelector('input[name="password"]').value;
                const confirmPassword = this.querySelector('input[name="confirm_password"]').value;
                const firstName = this.querySelector('input[name="first_name"]').value;
                const lastName = this.querySelector('input[name="last_name"]').value;
                
                // Validate passwords match
                if (password !== confirmPassword) {
                    registerAlert.textContent = 'Passwords do not match';
                    registerAlert.style.display = 'block';
                    return;
                }
                
                // Send registration request to correct endpoint
                fetch('/register/basic', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        username,
                        email,
                        password,
                        first_name: firstName,
                        last_name: lastName
                    })
                })
                .then(response => {
                    if (!response.ok) {
                        return response.json().then(data => {
                            throw new Error(data.error || 'Registration failed');
                        });
                    }
                    return response.json();
                })
                .then(data => {
                    // Show success message and switch to signin form
                    registerAlert.textContent = 'Registration successful! Please sign in.';
                    registerAlert.className = 'alert alert-success';
                    registerAlert.style.display = 'block';
                    
                    // Clear the form
                    registerFormElement.reset();
                    
                    // Switch to signin form after a short delay
                    setTimeout(() => {
                        registerForm.classList.add('hidden');
                        signinForm.classList.remove('hidden');
                    }, 2000);
                })
                .catch(error => {
                    registerAlert.textContent = error.message;
                    registerAlert.className = 'alert alert-error';
                    registerAlert.style.display = 'block';
                });
            });
        });
    </script>
</body>
</html>
